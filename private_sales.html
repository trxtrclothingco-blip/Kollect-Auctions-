<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Private Sales – Kollect Auctions</title>
<link rel="stylesheet" href="style.css">
<script type="module" src="firebase.js"></script>
<script type="module" src="script.js"></script>
<script type="module" src="products.js"></script>
</head>
<body data-page="privatesales">

<div class="burger" onclick="toggleMenu()">
  <div></div><div></div><div></div>
</div>

<nav class="nav-menu" id="navMenu">
  <a href="index.html">Home</a>
  <a href="dashboard.html">Dashboard</a>
  <a href="about.html">About Us</a>
  <a href="live_auctions.html">Live Auctions</a>
  <a href="kollect_100.html">Kollect 100</a>
  <a href="private_sales.html">Private Sales</a>
  <a href="contact.html">Contact Us</a>
  <a href="admin.html">Admin</a>
  <a href="results.html">Results</a>
  <a href="create_account.html">Sign In</a>
  <button id="modeToggle" onclick="toggleMode()">Toggle Light/Dark Mode</button>
</nav>

<div id="user-status">Checking login status...</div>
<button id="logout-button" style="display:none;" onclick="logoutUser()">Logout</button>

<div class="container">
  <img src="IMG_1604.jpeg" alt="Kollect Auctions Logo" class="hero-image">
  <h1>Private Sales</h1>
  <p>Fixed Price Collectables & One of a kind Items. </p>

  <!-- Container for dynamic items -->
  <div id="private-sales-list"></div>
</div>

<script type="module">
  import { db } from './firebase.js';
  import { collection, getDocs } from 'https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js';

  async function loadPrivateSales() {
    const privateSalesList = document.getElementById('private-sales-list');
    privateSalesList.innerHTML = ''; // Clear existing content

    try {
      const querySnapshot = await getDocs(collection(db, 'privatesales'));

      if (querySnapshot.empty) {
        privateSalesList.innerHTML = '<p>No items available for private sale.</p>';
        return;
      }

      querySnapshot.forEach((doc) => {
        const data = doc.data();
        // Use the correct field name 'image' from Firestore
        const { name, description, price, image } = data;

        // Use a card that matches the style of your second HTML
        const card = document.createElement('div');
        card.classList.add('card');

        card.innerHTML = `
          <img src="${image}" alt="${name}">
          <h3>${name}</h3>
          <p>Price: £${price.toFixed(2)}</p>
          <button class="button">Buy Now</button>
        `;

        privateSalesList.appendChild(card);
      });
    } catch (error) {
      console.error('Error loading private sales:', error);
      privateSalesList.innerHTML = '<p>Error loading items. Please try again later.</p>';
    }
  }

  document.addEventListener('DOMContentLoaded', loadPrivateSales);
</script>

</body>
</html>
