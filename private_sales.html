<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Private Sales â€“ Kollect Auctions</title>
<link rel="stylesheet" href="style.css">
<script type="module" src="firebase.js"></script>
<script type="module" src="script.js"></script>
<script type="module" src="products.js"></script>
</head>
<body data-page="privatesales">

<div class="burger" onclick="toggleMenu()">
  <div></div><div></div><div></div>
</div>

<nav class="nav-menu" id="navMenu">
  <a href="index.html">Home</a>
  <a href="dashboard.html">Dashboard</a>
  <a href="about.html">About Us</a>
  <a href="live_auctions.html">Live Auctions</a>
  <a href="kollect_100.html">Kollect 100</a>
  <a href="private_sales.html">Private Sales</a>
  <a href="contact.html">Contact Us</a>
  <a href="admin.html">Admin</a>
  <a href="results.html">Results</a>
  <a href="create_account.html">Sign In</a>
  <button id="modeToggle" onclick="toggleMode()">Toggle Light/Dark Mode</button>
</nav>

<div id="user-status">Checking login status...</div>
<button id="logout-button" style="display:none;" onclick="logoutUser()">Logout</button>

<div class="container">
  <img src="IMG_1604.jpeg" alt="Kollect Auctions Logo" class="hero-image">
  <h1>Private Sales</h1>
  <p>Make an Offer or Buy It Now</p>

  <!-- Container for dynamic items -->
  <div id="private-sales-list"></div>
</div>

<script type="module">
  import { db } from './firebase.js';
  import { collection, getDocs } from 'https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js';

  async function loadPrivateSales() {
    const privateSalesList = document.getElementById('private-sales-list');
    privateSalesList.innerHTML = ''; // Clear existing content

    try {
      const querySnapshot = await getDocs(collection(db, 'privatesales'));

      if (querySnapshot.empty) {
        privateSalesList.innerHTML = '<p>No items available for private sale.</p>';
        return;
      }

      querySnapshot.forEach((doc) => {
        const data = doc.data();
        // Use the correct field name 'image' from Firestore
        const { name, description, price, image } = data;

        // Handle single image URL directly
        const imgUrl = image;

        const card = document.createElement('div');
        card.classList.add('product-card');

        card.innerHTML = `
          <img src="${imgUrl}" alt="${name}" class="product-image">
          <h2>${name}</h2>
          <p>${description}</p>
          <p class="price">$${price.toFixed(2)}</p>
          <button class="buy-now">Buy It Now</button>
          <button class="make-offer">Make an Offer</button>
        `;

        privateSalesList.appendChild(card);
      });
    } catch (error) {
      console.error('Error loading private sales:', error);
      privateSalesList.innerHTML = '<p>Error loading items. Please try again later.</p>';
    }
  }

  document.addEventListener('DOMContentLoaded', loadPrivateSales);
</script>

</body>
</html>
